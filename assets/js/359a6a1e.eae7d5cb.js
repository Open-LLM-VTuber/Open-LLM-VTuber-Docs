"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7176],{9409:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>l,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"user-guide/backend/structure","title":"\u540e\u7aef\u67b6\u6784\u6982\u89c8","description":"\u6838\u5fc3\u7ec4\u4ef6\u4ea4\u4e92\u6d41\u7a0b","source":"@site/docs/user-guide/backend/structure.md","sourceDirName":"user-guide/backend","slug":"/user-guide/backend/structure","permalink":"/docs/user-guide/backend/structure","draft":false,"unlisted":false,"editUrl":"https://github.com/Open-LLM-VTuber/Open-LLM-VTuber-Docs/tree/main/docs/user-guide/backend/structure.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docSidebar","previous":{"title":"\u540e\u7aef\u6307\u5357","permalink":"/docs/category/\u540e\u7aef\u6307\u5357"},"next":{"title":"\u8bed\u97f3\u8bc6\u522b (ASR)","permalink":"/docs/user-guide/backend/asr"}}');var c=t(4848),a=t(8453);const o={sidebar_position:1},i="\u540e\u7aef\u67b6\u6784\u6982\u89c8",s={},d=[{value:"\u6838\u5fc3\u7ec4\u4ef6\u4ea4\u4e92\u6d41\u7a0b",id:"\u6838\u5fc3\u7ec4\u4ef6\u4ea4\u4e92\u6d41\u7a0b",level:2},{value:"\u4ee3\u7801\u7ed3\u6784",id:"\u4ee3\u7801\u7ed3\u6784",level:2},{value:"\u914d\u7f6e\u7ed3\u6784",id:"\u914d\u7f6e\u7ed3\u6784",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",mermaid:"mermaid",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"\u540e\u7aef\u67b6\u6784\u6982\u89c8",children:"\u540e\u7aef\u67b6\u6784\u6982\u89c8"})}),"\n",(0,c.jsx)(n.h2,{id:"\u6838\u5fc3\u7ec4\u4ef6\u4ea4\u4e92\u6d41\u7a0b",children:"\u6838\u5fc3\u7ec4\u4ef6\u4ea4\u4e92\u6d41\u7a0b"}),"\n",(0,c.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant User\n    participant Live2D\n    participant Frontend\n    participant WebSocket\n    participant Backend\n    participant ASR\n    participant Agent\n    participant Translator\n    participant TTS\n\n    User->>Frontend: \u8bf4\u8bdd/\u8f93\u5165\u6587\u5b57\n    \n    alt \u8bed\u97f3\u8f93\u5165\n        Frontend->>WebSocket: \u53d1\u9001\u97f3\u9891\u6570\u636e\n        WebSocket->>Backend: \u8f6c\u53d1\u97f3\u9891\u6570\u636e\n        Backend->>ASR: \u8bed\u97f3\u8bc6\u522b\n        ASR--\x3e>Backend: \u8fd4\u56de\u6587\u672c\n    else \u6587\u5b57\u8f93\u5165\n        Frontend->>WebSocket: \u53d1\u9001\u6587\u672c\u6570\u636e\n    end\n\n    Backend->>Agent: \u5904\u7406\u7528\u6237\u8f93\u5165\n    Note over Agent: 1. \u517c\u5bb9\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u7684 Agent<br>2. \u4fdd\u5b58\u5bf9\u8bdd\u5386\u53f2\n    \n    loop \u6bcf\u4e2a\u53e5\u5b50\n        Agent--\x3e>Backend: \u751f\u6210\u56de\u590d\u6587\u672c\n        opt \u9700\u8981\u7ffb\u8bd1\n            Backend->>Translator: \u7ffb\u8bd1\u56de\u590d\u6587\u672c\n            Translator--\x3e>Backend: \u8fd4\u56de\u7ffb\u8bd1\u6587\u672c\n        end\n        Backend->>TTS: \u6587\u672c\u8f6c\u8bed\u97f3\n        TTS--\x3e>Backend: \u8fd4\u56de\u97f3\u9891\n        Backend->>WebSocket: \u53d1\u9001\u97f3\u9891\u548c\u8868\u60c5\u6570\u636e\n        WebSocket->>Frontend: \u8f6c\u53d1\u6570\u636e\n        Frontend->>User: \u64ad\u653e\u8bed\u97f3\n        Frontend->>Live2D: \u63a7\u5236\u6a21\u578b\u8868\u60c5\n        Live2D--\x3e>User: \u5c55\u793a\u52a8\u753b\u6548\u679c\n    end\n\n    Note over Frontend,Backend: \u6574\u4e2a\u8fc7\u7a0b\u652f\u6301:<br>1. \u4e2d\u65ad\u5bf9\u8bdd<br>2. \u5207\u6362\u89d2\u8272\u914d\u7f6e<br>3. \u5386\u53f2\u8bb0\u5f55\u7ba1\u7406"}),"\n",(0,c.jsx)(n.h2,{id:"\u4ee3\u7801\u7ed3\u6784",children:"\u4ee3\u7801\u7ed3\u6784"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"\u251c\u2500\u2500 background/                # \u80cc\u666f\u56fe\u7247\u8d44\u6e90\u76ee\u5f55\n\u251c\u2500\u2500 characters/               # \u89d2\u8272\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\n\u251c\u2500\u2500 frontend/                # \u524d\u7aef\u9875\u9762\u6587\u4ef6\u76ee\u5f55\n\u251c\u2500\u2500 live2d-models/           # Live2D \u6a21\u578b\u8d44\u6e90\u76ee\u5f55\n\u251c\u2500\u2500 logs/                    # \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55\n\u251c\u2500\u2500 models/                  # AI \u6a21\u578b\u6587\u4ef6\u76ee\u5f55\n\u251c\u2500\u2500 prompts/                 # \u63d0\u793a\u8bcd\u6a21\u677f\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 presona/            # \u89d2\u8272\u4eba\u8bbe\u63d0\u793a\u8bcd\n\u2502   \u251c\u2500\u2500 utils/              # \u5de5\u5177\u7c7b\u63d0\u793a\u8bcd\n\u2502   \u2514\u2500\u2500 prompt_loader.py    # \u63d0\u793a\u8bcd\u52a0\u8f7d\u5668\n\u251c\u2500\u2500 src/                     # \u6e90\u4ee3\u7801\u76ee\u5f55\n\u2502   \u2514\u2500\u2500 open_llm_vtuber/    # \u4e3b\u8981\u4ee3\u7801\u5305\n\u2502       \u251c\u2500\u2500 agent/          # AI \u5bf9\u8bdd\u4ee3\u7406\u6a21\u5757\n\u2502       \u2502   \u251c\u2500\u2500 agents/     # \u4e0d\u540c\u7c7b\u578b\u7684\u5bf9\u8bdd\u4ee3\u7406\u5b9e\u73b0\n\u2502       \u2502   \u2514\u2500\u2500 stateless_llm/  # \u65e0\u72b6\u6001 LLM \u63a5\u53e3\u5b9e\u73b0\n\u2502       \u251c\u2500\u2500 asr/            # \u8bed\u97f3\u8bc6\u522b\u6a21\u5757\n\u2502       \u251c\u2500\u2500 tts/            # \u8bed\u97f3\u5408\u6210\u6a21\u5757\n\u2502       \u251c\u2500\u2500 chat_history_manager.py  # \u804a\u5929\u5386\u53f2\u7ba1\u7406\u5668\n\u2502       \u251c\u2500\u2500 conversation.py          # \u5bf9\u8bdd\u7ba1\u7406\n\u2502       \u251c\u2500\u2500 live2d_model.py          # Live2D \u6a21\u578b\u7ba1\u7406\u5668\n\u2502       \u251c\u2500\u2500 routes.py                # FastAPI \u8def\u7531\u5b9a\u4e49\n\u2502       \u251c\u2500\u2500 server.py                # WebSocket \u670d\u52a1\u5668\n\u2502       \u2514\u2500\u2500 service_context.py       # \u670d\u52a1\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\n\u251c\u2500\u2500 conf.yaml                # \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\n\u2514\u2500\u2500 run_server.py           # \u542f\u52a8\u811a\u672c\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u914d\u7f6e\u7ed3\u6784",children:"\u914d\u7f6e\u7ed3\u6784"}),"\n",(0,c.jsxs)(n.p,{children:["\u4e0b\u56fe\u662f ",(0,c.jsx)(n.code,{children:"v1.0.0"})," \u7248\u672c \u914d\u7f6e\u6587\u4ef6\u7684\u57fa\u672c\u7ed3\u6784\u3002"]}),"\n",(0,c.jsx)(n.mermaid,{value:"graph TD\n  Configuration_File --\x3e system_config\n  Configuration_File --\x3e character_config\n  \n  system_config --\x3e ...\n\n  character_config --\x3e conf_name\n  character_config --\x3e conf_uid\n  character_config --\x3e live2d_model_name\n  character_config --\x3e persona_prompt\n  character_config --\x3e agent_config\n  character_config --\x3e asr_config\n  character_config --\x3e tts_config\n  character_config --\x3e tts_preprocessor_config\n\n  agent_config --\x3e conversation_agent_choice\n  agent_config --\x3e agent_settings\n  agent_config --\x3e llm_configs\n  \n  llm_configs --\x3e .....\n\n  agent_settings --\x3e basic_memory_agent\n  agent_settings --\x3e hume_ai_agent\n\n  asr_config --\x3e ..\n  tts_config --\x3e ....\n\n  tts_preprocessor_config --\x3e translator_config\n"})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(p,{...e})}):p(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var r=t(6540);const c={},a=r.createContext(c);function o(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);